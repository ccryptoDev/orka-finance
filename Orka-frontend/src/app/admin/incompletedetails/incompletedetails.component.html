<section class="content-header">
  <!-- <h1>View Application Details</h1> -->
  <ol class="breadcrumb">
    <li>
      <a [routerLink]="['/admin/dashboard']"><i class="fa fa-dashboard"></i> Dashboard</a>
    </li>
    <li>
      <a [routerLink]="['/admin/incomplete']"><i class="fa fa-dashboard"></i> Incomplete Application Details</a>
    </li>
    <li class="active">View Application Details</li>
  </ol>
</section>

<div class="frameshadow">
  <div class="mainTitle">
    <div>View Application Details</div>
    <div> <button type="button" class="btn-danger btn-user-control buttonSize" (click)="delete()">
        <i class="fa fa-trash" aria-hidden="true" style="padding-right: 5px;"></i>Delete
      </button>
    </div>
  </div>

  <div class="p10">
    <div class="pendingTab">
      <tabset #staticTabs>
        <!-- <tab heading="Loan Ops Review">
          <div class="p10px" *ngIf="financingTab.length > 0">
            <table class="table table-bordered">
              <tbody>
                <tr>
                  <td style="width: 200px">Financing Amount Requested</td>

                  <td *ngIf="financingTab;else media_false_content">${{financingTabamnt}}</td>
                  <ng-template #media_false_content>
                    <td>---</td>
                  </ng-template>
                </tr>
                <tr>
                  <td style="width:70%">Financing Term Requested</td>

                  <td *ngIf="financingTab;else aml_false_content">{{financingTab[0].interestRate}}%</td>
                  <ng-template #aml_false_content>
                    <td>---</td>
                  </ng-template>
                </tr>
                <tr>
                  <td style="width:70%">Origination Fee</td>

                  <td *ngIf="financingTab;else ofac_false_content">${{changeamnt}}</td>
                  <ng-template #ofac_false_content>
                    <td>---</td>
                  </ng-template>
                </tr>
                <tr>
                  <td style="width:70%">Product Requested</td>
                  <td *ngIf="financingTab;else ofac_false_content">{{financingTab[0].productName}}</td>
                  <ng-template #ofac_false_content>
                    <td>---</td>
                  </ng-template>
                </tr>
              </tbody>
            </table>
          </div>
          <accordion class="p10">
            <accordion-group heading="Products & Lending Limit">
              <div class="p10px">
                <table class="table table-bordered">
                  <tr class="bold">
                    <th>Product</th>
                    <th>$ Lending Limit Approved</th>
                    <th>Product Available?</th>
                  </tr>
                  <tbody *ngIf="loanProducts.length != 0">
                    <tr *ngFor="let d of loanProducts" >
                      <td [ngClass]="{ 'isbackground': financingTab[0].productName==d.productName }">{{d.productName}}</td>
                      <td [ngClass]="{ 'isbackground': financingTab[0].productName==d.productName }">${{changeAmtVal(d.financingApproved)}}</td>
                      <td [ngClass]="{ 'isbackground': financingTab[0].productName==d.productName }">
                        <span *ngIf="d.financingApproved > 25000;else err_msg">
                            Yes
                        </span>
                        <ng-template #err_msg>
                          No
                        </ng-template>
                      </td>
                    </tr>
                   
                  </tbody>
                </table>
              </div>
              </accordion-group>
              <accordion-group heading="Income Verification">
               
                <div class="p10px" *ngIf="statedIncome.length > 0">
                  <table class="table table-bordered" >
                    <tr class="bold">
                      <th>Rule</th>
                      <th>Response</th>
                      <th>Income ($) Verified</th>
                      <th>Rule Status (Pass / Fail)</th>
                    </tr>
                    <tbody>
                      <tr>
                        <td>Stated income must be verified</td>
                        <td>{{(statedIncome[0].requiredToVerifyStatedIncome==0)?'No':'Yes'}}</td>
                        <td></td>
                        <td [ngStyle]="statedIncome[0].requiredToVerifyStatedIncome==0?{'color':'green'}:{'color':'yellow'}">
                          {{(statedIncome[0].requiredToVerifyStatedIncome==0)?'Pass':'Fail'}}</td>
                     </tr>
                     <tr>
                      <td>Was stated income verified?</td>
                       
                      <td><label class="switch">
                        <input
                          type="checkbox"
                          [checked]="loanstatuschanged[0].incomeVerified == 'Yes'"
                          (change)="
                            updateloanIdstatus(
                              loanId,
                              $event,
                              'incomeverify'
                            )
                          "
                          name="onoffswitch"
                        />
                        <span class="slider round"></span>
                      </label></td>
                      <td>
                        <form name="form" #f="ngForm" novalidate>
                          <input type="text" name="updateincomeVerifiedvs" (keypress)="keyPressNumbers($event)" class="form-control mtop" placeholder="Enter Stated Income"
                                (input)="f1.updateincomeVerifiedvs = namedata($event)"  [(ngModel)]="f1.updateincomeVerifiedvs" #updateincomeVerifiedvs="ngModel"
                                required [ngClass]="{ 'is-invalid': f.submitted && updateincomeVerifiedvs.invalid }" />
                                <small *ngIf="updateincomeVerifiedvs.invalid && (updateincomeVerifiedvs.touched || f.submitted)" class="text-danger">
                                A response is required</small>
                       <input
                        type="text"
                        name="updateincomeVerifiedvs"
                        class="form-control updateincomeVerifiedvs"
                        placeholder="Enter stated income"
                        (input)="res.updateincomeVerifiedvs = namedata($event)"
                        [(ngModel)]="res.updateincomeVerifiedvs"
                        #updateincomeVerifiedvs="ngModel"
                        /> <span
                        *ngIf="updateincomeVerifiedvs.invalid && (updateincomeVerifiedvs.touched || fs.submitted)"
                        class="text-danger"
                        >User Email is required</span
                      
                      </form>
                      
                      </td>

                      <td [ngStyle]="updateincomeVerifiedv=='Pass'?{'color':'green'}:{'color':'yellow'}">{{updateincomeVerifiedv}}</td>
                     </tr>
                    </tbody>
                  </table>
                </div> 
              </accordion-group>
            <accordion-group heading="KYC- Equifax">
              <div *ngIf="equifaxReport.length > 0 && equifaxReport!=null && equifaxReport[0].report.Rules!=null;else cmrules_err">
               
                <table class="table table-bordered">
                  <tbody>

                    <tr>
                      <th style='width:30%;font-weight: 700;'>Rule</th>
                      <th style='width:30%;font-weight: 700;'>Response</th>
                      <th style='width:30%;font-weight: 700;'>Rule Status (Pass / Fail)</th>
                    </tr>
                    <tbody *ngIf="equifaxReport.length > 0;else err_kyc">
                    <tr *ngFor="let c of equifaxReport[0].report.Rules">

                      <td>{{c.Rules}}</td>
                      <td>{{removeString(c.RuleMessage)}}</td>
                      <td>
                        <span
                          [ngStyle]="c.RuleStatus=='FAIL'?{'color':'red'} : (c.RuleStatus=='BYPASS') ? {'color':'orange'}  : {'color': 'green'}">{{c.RuleStatus}}</span>
                      </td>
                    </tr>
                  </tbody>
                  <ng-template #err_kyc>
                    <tbody><tr>Records Found!.</tr></tbody> 
                  </ng-template>
                </table>
              </div>
              <ng-template #cmrules_err>No Rules Data Recieved!</ng-template>
            </accordion-group>
            <accordion-group heading="KYC- Comply Advantage">
              <div class="p10px">
                <table class="table table-bordered">
                  <tr>
                    <th colspan="3">KYC- Comply Advantage
                      <a style="margin-left: 35px; color: blue; cursor: pointer;" (click)="selectTab(1)">Comply
                        Advantage
                      </a>
                    </th>
                  </tr>
                  <tr class="bold">
                    <th>Rule</th>
                    <th>Response</th>
                    <th>Rule Status(Pass/Fail)</th>
                  </tr>
                  <tbody>
                    <tr>
                      <td>Adverse Media returns a hit</td>

                      <td *ngIf="complyadvantageAdverseMedia;else media_false_content">Yes</td>
                      <ng-template #media_false_content>
                        <td>No</td>
                      </ng-template>

                      <td *ngIf="complyadvantageAdverseMedia;else media_false_content_two">Fail</td>
                      <ng-template #media_false_content_two>
                        <td>Pass</td>
                      </ng-template>
                    </tr>
                    <tr>
                      <td>AML check flags applicant</td>

                      <td *ngIf="amlTypes;else aml_false_content">Yes</td>
                      <ng-template #aml_false_content>
                        <td>No</td>
                      </ng-template>

                      <td *ngIf="amlTypes;else aml_false_content_two">Fail</td>
                      <ng-template #aml_false_content_two>
                        <td>Pass</td>
                      </ng-template>
                    </tr>
                    <tr>
                      <td>OFAC check returns a hit</td>

                      <td *ngIf="ofacSdnList;else ofac_false_content">Yes</td>
                      <ng-template #ofac_false_content>
                        <td>No</td>
                      </ng-template>

                      <td *ngIf="ofacSdnList;else ofac_false_content_two">Fail</td>
                      <ng-template #ofac_false_content_two>
                        <td>Pass</td>
                      </ng-template>
                    </tr>
                  </tbody>
                </table>
              </div>
            </accordion-group>
            <accordion-group heading="KYB- Equifax">
              <div class="p10px">
                <div *ngIf="equifaxCommercialReport.length > 0;else err_kyb">
                  <table class="table table-bordered">
                    <tr class="bold">
                      <th>Rule</th>
                      <th>Response</th>
                      <th>Rule Status (Pass / Fail)</th>
                    </tr>
                    <tbody >
                      <tr *ngFor="let c of equifaxCommercialReport[0].report.Rules">

                        <td>{{c.Rules}}</td>
                        <td>{{c.RuleMessage}}</td>
                        <td>
                          <span
                            [ngStyle]="c.RuleStatus=='FAIL'?{'color':'red'} : {'color': 'green'}">{{c.RuleStatus}}</span>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <ng-template #err_kyb>
                  No Records Found!.
                </ng-template>
              </div>
            </accordion-group>
            <accordion-group heading="KYB- Middesk">
              <div class="p10px">
                <table class="table table-bordered">
                  <tr class="bold">
                    <th>S.No</th>
                    <th>Label</th>
                    <th>Message</th>
                    <th>Status</th>
                    <th>Sub Label</th>
                  </tr>
                  <tbody *ngIf="middeskData.length != 0">
                    <tr *ngFor="
                            let log of middeskData;
                            index as i
                          ">
                      <td>{{ i + 1 }}</td>
                      <td>
                        {{ log.label }}
                      </td>
                      <td>
                        {{ log.message }}
                      </td>
                      <td>
                        {{ log.status }}
                      </td>
                      <td>
                        {{ log.sub_label }}
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </accordion-group>

            <accordion-group heading="Property Ownership">
              <div class="p10px">
                <table class="table table-bordered">
                  <tr class="bold">
                    <th>Rule</th>
                    <th>Message</th>
                    <th>Upload</th>
                    <th>Rule Status (Pass / Fail)</th>
                  </tr>
                  <tbody *ngIf="financialquestion.length > 0">
                   <tr>
                    <td style="width:30%">Property ownership stated in credit app</td>
                    <td>{{financialquestion[0].ownershipType}}</td>
                    <td></td>
                    <td>N/A</td>
                   </tr>
                   <tr>
                    <td style="width:30%">Property ownership as stated in Data Tree</td>
                    <td>
                      <form name="forms" #f="ngForm" novalidate>
                      <select name="ownershipType" id="ownershipType" (change)="changeownerType(f1.ownershipType)" class="form-control"
                      [(ngModel)]="f1.ownershipType" (input)="f1.ownershipType = namedata($event)"
                      #ownershipType="ngModel" required>
                      <option value="null"  [disabled]="true">
                        Select Ownership Type
                      </option>
                      <option value="Mortgaged">Mortgaged</option>
                      <option selected value="Owned Free-and-Clear">
                        Owned Free-and-Clear
                      </option>
                      <option value="Leased">Leased</option>
                    </select>
                    <i class="fas fa-caret-down downicon"></i>
                    <small *ngIf="
                        ownershipType.invalid &&
                        (ownershipType.touched || f.submitted)
                      " class="text-danger">A response is required</small>
                    </form></td>
                    <td>

                      <button class="newbutton mt20" *ngIf="sales_items.length==0 && data_replace_res.length==0">
                        <div class="">
                          <ngx-file-drop dropZoneLabel="Drop files here" (onFileDrop)="salesitems($event)"
                            (onFileOver)="fileOver($event)" (onFileLeave)="fileLeave($event)">
                            <ng-template ngx-file-drop-content-tmp let-openFileSelector="openFileSelector">
                              <span (click)="openFileSelector()">Upload</span>
                            </ng-template>
                          </ngx-file-drop>
                        </div>
                        
                      </button>
                    <div *ngIf="data_replace_res.length > 0">
                      <div *ngFor="let d of data_replace_res; let i = index">
                        <div class="cursor-pointer" (click)="view(showFile,d.filename)">
                        {{ d.originalname }}<span class="tomatoColor fs-12"> </span>
                        <i class="fas fa-times cur-poi" (click)="deleteFilelist(d.originalname)"></i>
                        </div>
                      </div>
                    </div>
                     

                      <div class="row1 AlignItemCenter spaceBetween" *ngFor="let file of sales_items; let i = index">
                        <div class=" AlignItemCenter">
                          <img *ngIf="filetype_salesitems_val_res == 'pdf'" src="../../../assets/pdf_icon1.png" class="pdficon"
                            alt="" />
                          <img *ngIf="filetype_salesitems_val_res == 'doc'" src="../../../assets/doc_icon.png" class="pdficon"
                            alt="" />
                          <img *ngIf="filetype_salesitems_val_res == 'png'" src="../../../assets/png_icon.png" class="pdficon"
                            alt="" />
                          <img *ngIf="
                              filetype_salesitems_val_res == 'jpeg' ||
                              filetype_salesitems_val == 'jpg'
                            " src="../../../assets/jpeg_icon.png" class="pdficon" alt="" />
                          <div class="leftheading3 pdfText">
                            {{ file.name.split(".")[0] }}
                            <span class="tomatoColor">
                              <i class="fas fa-times cur-poi" (click)="deleteFileSelected_sales(e)"></i></span>
                          </div>
                        </div>
                        <button [disabled]="clicked" (click)="upoadDocumentsOwnertype()" class="replaceButton1">
                          Submit
                        </button>
                      </div>

                    </td>
                    <td>
                      <span [ngStyle]="rulestatus=='Fail'?{'color':'yellow'}:{'color': 'green'}">
                      {{rulestatus}}
                    </span>
                    </td>
                   </tr>
                  </tbody>
                </table>
              </div>
            </accordion-group>

            <accordion-group heading="Tax Documents">
              <div class="p10px" *ngIf="loanstatuschanged.length > 0">
                <table class="table table-bordered">
                  <tr class="bold">
                    <th>Rule</th>
                    <th>Response</th>
                    <th>Rule Status (Pass / Fail)</th>
                  </tr>
                  <tbody >
                    <tr *ngFor="let d of data.files; let i = index">
                      <tr>
                      <td>Tax Documents uploaded in credit app</td>
                      <td *ngIf="taxarray.length > 0;else err_tax"> Yes</td>
                      <ng-template #err_tax><td>No</td></ng-template>
                      <td>N/A</td>
                      <<td (click)="view(showFile,d.filename)" class="cursorpointer">
                        <a>View Document</a>
                      </td>
                    </tr>
                    <tr>
                      <td>Tax Documents verified</td>
                      <td><label class="switch">
                        <input
                          type="checkbox"
                          [checked]="loanstatuschanged[0].taxDocumentsVerified == 'Yes'"
                          (change)="
                          changetaxDocumentsVerified(
                              loanId,
                              $event,
                              'taxDocumentsVerified'
                            )
                          "
                          name="onoffswitch"
                        />
                        <span class="slider round"></span>
                      </label></td>
                      <td [ngStyle]="taxrulestatus=='Fail'?{'color':'yellow'}:{'color': 'green'}">
                        
                        {{taxrulestatus}}
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>

               <div class="p10px">
                <table class="table table-bordered">
                  <tr>
                    <th style="width: 50px">#</th>
                    <th>Rule</th>
                    <th>Document Type</th>
                    <th>PDF,JPG,JPEG,PNG</th>
                  </tr>
                  
                </table>
              </div>
            </accordion-group>


            <accordion-group heading="Financial Questions Asked and Answered">
              <div class="p10px" *ngIf="financialquestion.length > 0">
                <table class="table table-bordered">
                  <tr class="bold">
                    <th>Question</th>
                    <th>Response from Borrower</th>
                  </tr>
                  <tbody>
                   <tr>
                    <td>What life cycle stage would best describe your business now?</td>
                    <td>{{financialquestion[0].lifeCycleStage}}</td>
                   </tr>
                   <tr>
                    <td>What revenue growth do you expect in the year ahead?</td>
                    <td>{{financialquestion[0].expectedRevGrowth}}</td>
                   </tr>
                   <tr>
                    <td>What’s driving this growth?</td>
                    <td>{{financialquestion[0].growthDrivers}}</td>
                   </tr>
                   <tr>
                    <td>How do you expect your business’ profitability (net margin) to grow over the next 1-3 years, compared to revenue expectations?</td>
                    <td>{{financialquestion[0].profitabilityGrowth}}</td>
                   </tr>
                   <tr>
                    <td>Please describe any significant liabilities / indebtedness, including purpose and repayment terms.</td>
                    <td>{{financialquestion[0].liabilities}}</td>
                   </tr>
                   <tr>
                    <td>Describe any challenges, if any, you expect for your business coming out of the COVID-19 pandemic.</td>
                    <td>{{financialquestion[0].challenges}}</td>
                   </tr>
                  </tbody>
                </table>
              </div>
            </accordion-group>


            <accordion-group heading="Request for Information">
              <div class="p10px">
                <table class="table table-bordered">
                  <tr class="bold">
                    <th>Documentation requested</th>
                    <th>Email will include the following language in the bullets (Loan ops can edit)</th>
                    <th>More information needed? Select all that apply and then click SUBMIT</th>
                  </tr>
                  <tbody>
                   <tr>
                    <td>Tax documents needed</td>
                    <td>Please provide the last two years of tax returns for your business</td>
                    <td><label class="switch">
                      <input
                        type="checkbox"
                        (change)="
                        sendemailtext(
                            loanId,
                            $event,
                            'Tax documents needed'
                          )
                        "
                        name="onoffswitch"
                      />
                      <span class="slider round"></span>
                    </label></td>
                   </tr>
                   <tr>
                    <td>Confirm property ownership</td>
                    <td>Please provide proof that you own your property (e.g., most recent mortgage statement or other proof of ownership)</td>
                    <td><label class="switch">
                      <input
                        type="checkbox"
                        (change)="
                        sendemailtext(
                            loanId,
                            $event,
                            'Confirm property ownership'
                          )
                        "
                        name="onoffswitch"
                      />
                      <span class="slider round"></span>
                    </label></td>
                   </tr>
                   <tr>
                    <td>Business financials needed</td>
                    <td>Please provide the last two years, including YTD if available, of financials for your business</td>
                    <td><label class="switch">
                      <input
                        type="checkbox"
                        (change)="
                        sendemailtext(
                            loanId,
                            $event,
                            'Business financials needed'
                          )
                        "
                        name="onoffswitch"
                      />
                      <span class="slider round"></span>
                    </label></td>
                   </tr>
                   <tr>
                    <td>Income verification</td>
                    <td>Please provide your W2 or paystub for the last 2 months</td>
                    <td><label class="switch">
                      <input
                        type="checkbox"
                        (change)="
                        sendemailtext(
                            loanId,
                            $event,
                            'Income verification'
                          )
                        "
                        name="onoffswitch"
                      />
                      <span class="slider round"></span>
                    </label></td>
                   </tr>
                   <tr>
                    <td>Other 1</td>
                    <td></td>
                    <td><label class="switch">
                      <input
                        type="checkbox"
                        (change)="
                        sendemailtext(
                            loanId,
                            $event,
                            'other1'
                          )
                        "
                        name="onoffswitch"
                      />
                      <span class="slider round"></span>
                    </label></td>
                   </tr>
                   <tr>
                    <td>Other 2</td>
                    <td></td>
                    <td><label class="switch">
                      <input
                        type="checkbox"
                        (change)="
                        sendemailtext(
                            loanId,
                            $event,
                            'other2'
                          )
                        "
                        name="onoffswitch"
                      />
                      <span class="slider round"></span>
                    </label></td>
                   </tr>
                   <tr>
                    <td>Other 3</td>
                    <td></td>
                    <td><label class="switch">
                      <input
                        type="checkbox"
                        (change)="
                        sendemailtext(
                            loanId,
                            $event,
                            'other3'
                          )
                        "
                        name="onoffswitch"
                      />
                      <span class="slider round"></span>
                    </label></td>
                   </tr>
                   
                  </tbody>
                </table>
                <div class="pull-right">
                  <button type="submit" class="greenbutton">Save</button>
                </div>
              </div>
            </accordion-group>

          </accordion>
        </tab> -->
        <tab heading="User Information" *ngIf="data.from_details.length > 0 && tabs['User Information']">
          <div class="p10px">
            <div class="displayFlex AlignItemCenter spaceBetween p10px frameshadow">
              <div class="fs22px displayFlex AlignItemCenter spaceBetween flexDirection mr30px">
                <div class="profilePhoto">
                  <i class="fa fa-user" aria-hidden="true"></i>
                </div>
                <div class="nowrap">{{ data.from_details[0]["firstName"] }}
                  {{ data.from_details[0]["lastName"] }}</div>
              </div>
            </div>
            <br /><br />
            <div class="list">
              <ul class="h700">
                <li>
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">User Reference</div>
                    <div>
                      <a routerLink="/admin/users/{{
                          data.from_details[0]['user_id']
                        }}">
                        USR_{{ data.from_details[0]["ref_no"] }}
                      </a>
                    </div>
                  </div>
                </li>
                <li>
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">Name</div>
                    <div>
                      {{ data.from_details[0]["legalName"] }}
                      <span (click)="showUserNameEditModel(userNameEditTemp)" class="text-danger cursorpointer">
                        <i class="fa fa-edit" aria-hidden="true"></i>
                      </span>
                    </div>
                  </div>
                </li>
                <li>
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">Email Address</div>
                    <div>
                      {{ data.from_details[0]["email"] }}
                      <i class="fa fa-bell text-danger cursorpointer" aria-hidden="true"></i>
                    </div>
                  </div>
                </li>
                <li>
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">Phone Number</div>
                    <div>
                      {{ data.from_details[0]["businessPhone"] }}
                      <i class="fa fa-bell text-danger cursorpointer" aria-hidden="true"></i>
                    </div>
                  </div>
                </li>
                <li>
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">Business Start Date</div>
                    <div>{{ data.from_details[0]["startDate"] }}</div>
                  </div>
                </li>
                <li>
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">Address</div>
                    <div class="textAlignRight">
                      <div>
                        {{ data.from_details[0]["businessAddress"] }},
                        <i class="fa fa-edit text-danger cursorpointer" aria-hidden="true"
                          (click)="showStreetAddressEditModel(streetAddressEditTemp)"></i>
                      </div>
                      <div>
                        {{ data.from_details[0]["city"] }}
                        <i class="fa fa-edit text-danger cursorpointer" aria-hidden="true"
                          (click)="showCityEditModel(cityEditTemp)"></i>
                      </div>
                      <div>
                        {{ data.from_details[0]["zipCode"] }}
                        <i class="fa fa-edit text-danger cursorpointer" aria-hidden="true"
                          (click)="showZipCodeEditModel(zipCodeEditTemp)"></i>
                      </div>
                    </div>

                  </div>
                </li>
                <li>
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">State</div>
                    <div>{{ data.from_details[0]["state"] }}</div>
                  </div>
                </li>

                <li>
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">Owner Name</div>
                    <div>{{ data.from_details[0]["ownerFirstName"] }} {{ data.from_details[0]["ownerLastName"] }}</div>
                  </div>
                </li>

                <li>
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">Owner Email</div>
                    <div>{{ data.from_details[0]["ownerEmail"] }}</div>
                  </div>
                </li>

                <li>
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">Owner Mobile</div>
                    <div>{{ data.from_details[0]["ownerPhone"] }}</div>
                  </div>
                </li>
                <li>
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">Financing Exist</div>
                    <div>
                      Yes
                      <i class="fa fa-bell text-success cursorpointer" aria-hidden="true"></i>
                    </div>
                  </div>
                </li>
                <li>
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">Bank Added</div>
                    <div>
                      <i class="fa fa-bell text-success cursorpointer" aria-hidden="true"></i>
                    </div>
                  </div>
                </li>

                <li>
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">Registered Date</div>
                    <div>{{ data.from_details[0]["createdAt"] }}</div>
                  </div>
                </li>
                <li>
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">Last Profile Update Date</div>
                    <div>{{ data.from_details[0]["updatedAt"] }}</div>
                  </div>
                </li>
                <li>
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">Last Year Revenue</div>
                    <div>${{ data.from_details[0]["lastYearRevenue"] }}</div>
                  </div>
                </li>

                <li>
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">Business Structure</div>
                    <div>{{ data.from_details[0]["businessStructure"] }}</div>
                  </div>
                </li>
                <li>
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">Financing Requested</div>
                    <div>{{ data.loanDetails[0]["financingRequested"] }}</div>
                  </div>
                </li>
                <li>
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">Financing Term Requested</div>
                    <div *ngIf="data.loanDetails[0]['financingTermRequested']!=null">{{
                      data.loanDetails[0]["financingTermRequested"]}}
                      months / {{data.loanDetails[0]["interestBaseRate"]}}% interest
                    </div>
                  </div>
                </li>
                <li>
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">Origination Fee</div>
                    <div *ngIf="data.loanDetails[0]['originationFee']!=null">{{
                      data.loanDetails[0]["financingRequested"] * (data.loanDetails[0]["originationFee"]/100) }}</div>
                  </div>
                </li>
                <li>
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">Anticipated Financed Amount</div>
                    <div>--</div>
                  </div>
                </li>
                <li class="displayNone">
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">PreDTI Debt</div>
                    <div>--</div>
                  </div>
                </li>
                <li class="displayNone">
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">Funding Tier</div>
                    <div>--</div>
                  </div>
                </li>

                <li class="displayNone">
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">PreDTI Debt(%)</div>
                    <div>--</div>
                  </div>
                </li>
                <li class="displayNone">
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">PreDTI Debt(%)</div>
                    <div>--</div>
                  </div>
                </li>
                <li class="displayNone">
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">Payroll Detected Income</div>
                    <div>$0.00</div>
                  </div>
                </li>
                <li class="displayNone">
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">Housing Expense</div>
                    <div>$0.00</div>
                  </div>
                </li>
                <li class="displayNone">
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">Income Type</div>
                    <div>Modified by admin</div>
                  </div>
                </li>
                <li class="displayNone">
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">Underwriting Rules</div>
                    <div>--</div>
                  </div>
                </li>
                <li>
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">Application Reference Number</div>
                    <div>APP_{{ data.from_details[0]["ref_no"] }}</div>
                  </div>
                </li>
                <li>
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">Financing Status</div>
                    <div class="text-success">{{ data.loanDetails[0]["status_flag"]}}</div>
                  </div>
                </li>
                <li>
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">Denied Reason</div>
                    <div class="text-success">--</div>
                  </div>
                </li>
                <li>
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">Counter offered</div>
                    <div class="text-success">--</div>
                  </div>
                </li>
                <li>
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">Application Created By</div>
                    <div class="text-success">User</div>
                  </div>
                </li>
                <li>
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">Plaid Re-sent By</div>
                    <div class="text-success">--</div>
                  </div>
                </li>
                <li>
                  <div class="displayFlex listdetails">
                    <div class="fontWeight">Offer Link Send By</div>
                    <div class="text-success">--</div>
                  </div>
                </li>
              </ul>
            </div>

            <div>
              <accordion class="p10">
                <accordion-group heading="Rules Information">
                  <table class="table table-bordered">
                    <tbody>

                      <tr>
                        <th style='width:30%;font-weight: 700;'>Rules</th>
                        <th style='width:30%;font-weight: 700;'>Rules Message</th>
                        <th style='width:30%;font-weight: 700;'>Rule Status</th>
                      </tr>
                      <tr *ngFor="let c of data.commonEquifaxRules.Rules">

                        <td>{{c.Rules}}</td>
                        <td>{{c.RuleMessage}}</td>
                        <td>
                          <span
                            [ngStyle]="c.RuleStatus=='FAIL'?{'color':'red'} : (c.RuleStatus=='BY PASS') ? {'color':'orange'}  : {'color': 'green'}">{{c.RuleStatus}}</span>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </accordion-group>

                <accordion-group heading="Bank Rules Information">
                  <table class="table table-bordered">
                    <tbody>

                      <tr>
                        <th style='width:30%;font-weight: 700;'>Rules</th>
                        <th style='width:30%;font-weight: 700;'>Rules Message</th>
                        <th style='width:30%;font-weight: 700;'>Rule Status</th>
                      </tr>
                      <tr *ngFor="let c of data.commonEquifaxRules.BankRules">

                        <td>{{c.Rules}}</td>
                        <td>{{c.RuleMessage}}</td>
                        <td>
                          <span
                            [ngStyle]="c.RuleStatus=='FAIL'?{'color':'red'} : {'color': 'green'}">{{c.RuleStatus}}</span>
                        </td>
                      </tr>

                  </table>
                </accordion-group>
              </accordion>
            </div>
          </div>
        </tab>

        <tab heading="Payment Schedule" *ngIf="data.from_details.length > 0 && tabs['Payment Schedule']">
          <div class="p10px">
            <div class="displayFlex">
              <div class="frameshadow w35per mr30px">
                <div>
                  <div class="mainTitle">Payment</div>
                  <div class="list2">
                    <ul>
                      <li>
                        <div class="displayFlex listdetails">
                          <div class="fontWeight bold">Financing Start Date</div>
                          <div>{{ payment[0].createdAt }}</div>
                        </div>
                      </li>
                      <li>
                        <div class="displayFlex listdetails">
                          <div class="fontWeight bold">Financing Amount</div>
                          <div>{{ payment[0].loan_advance | currency }}</div>
                        </div>
                      </li>

                      <li>
                        <div class="displayFlex listdetails">
                          <div class="fontWeight bold">Payoff Amount</div>
                          <div>{{ payment[0].payOffAmount | currency }}</div>
                        </div>
                      </li>

                      <li>
                        <div class="displayFlex listdetails">
                          <div class="fontWeight bold">APR</div>
                          <div>{{ payment[0].apr }}%</div>
                        </div>
                      </li>

                      <li>
                        <div class="displayFlex listdetails">
                          <div class="fontWeight bold">Financing Term</div>
                          <div>{{ payment[0].loantermcount }}</div>
                        </div>
                      </li>
                      <li>
                        <div class="displayFlex listdetails">
                          <div class="fontWeight bold">Financing Status</div>
                          <div>Incomplete</div>
                        </div>
                      </li>
                      <li>
                        <div class="displayFlex listdetails">
                          <div class="fontWeight bold">Maturity Date</div>
                          <div>{{ payment[0].maturityDate }}</div>
                        </div>
                      </li>
                      <li>
                        <div class="displayFlex listdetails">
                          <div class="fontWeight bold">
                            Next Payment Schedule Date
                          </div>
                          <div>{{ payment[0].nextPaymentSchedule }}</div>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
              <div class="frameshadow w65per">
                <div class="mainTitle">Payment Schedule Information</div>

                <div>
                  <table class="table">
                    <thead>
                      <tr class="bold">
                        <th style="width: 10px">#</th>
                        <th>Unpaid Principal Balance</th>
                        <th>Principal</th>
                        <th>Interest</th>
                        <th>Fees</th>
                        <th>Amount</th>
                        <th>Schedule Date</th>
                        <th>Paid Date</th>
                        <th>Status</th>
                      </tr>
                    </thead>
                    <tbody *ngIf="data.paymentScheduleDetails.length > 1">
                      <tr *ngFor="
                          let d of data.paymentScheduleDetails;
                          let i = index
                        ">
                        <td>{{ i + 1 }}</td>
                        <td>
                          {{ d.unpaidPrincipal | currency }}
                        </td>
                        <td>
                          {{ d.principal | currency }}
                        </td>
                        <td>{{ d.interest | currency }}</td>
                        <td>{{ d.fees | currency }}</td>
                        <td>{{ d.amount | currency }}</td>
                        <td>
                          {{ datePipe.transform(d.scheduleDate, "yyyy/MM/dd") }}
                        </td>
                        <td *ngIf="d.paidAt">
                          {{ datePipe.transform(d.paidAt, "yyyy/MM/dd") }}
                        </td>
                        <td *ngIf="!d.paidAt" class="text-center">
                          -
                        </td>
                        <td>{{ d.status_flag }}</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </tab>

        <tab heading="Bank Accounts" *ngIf="data.from_details.length > 0 && tabs['Bank Accounts']">
          <div id="userbankinfo" class="bankaccountDetails">
            <div class="bankaccount-btns-wrapper displayFlex flexEnd" style="margin: 10px">
              <button type="button" class="btn greenBorder bgtrans" id="sendaddbankinvitation" data-toggle="modal"
                data-target="#sendaddbankinvitationModal" (click)="sendbanklogin()">
                <div class="displayFlex">
                  <div class="sendBank"></div>
                  <div class="colblack">Send Bank Login</div>
                </div>
              </button>
              &nbsp;
              <button type="button" class="btn greenBorder bgtrans" (click)="manualBankAddModel(manualBankAddTemp)">
                <div class="displayFlex">
                  <div class="addBank"></div>
                  <div class="colblack">Add Bank Manually</div>
                </div>
              </button>
            </div>
            <!--  -->
            <accordion class="p10 cardSection" *ngIf=" bankaccounts.length > 0">
              <accordion-group heading="Bank Statement">
                <h4>User Information</h4>
                <table class="table table-bordered">
                  <tbody>
                    <tr>
                      <th style="width: 50%">Name</th>
                      <td>
                        {{ data.from_details[0].legalName }}
                      </td>
                    </tr>
                    <tr>
                      <th>Email</th>
                      <td>
                        {{ data.from_details[0]["email"] }}
                      </td>
                    </tr>
                    <tr>
                      <th>Phone</th>
                      <td>
                        {{ data.from_details[0]["phone"] }}
                      </td>
                    </tr>
                    <tr>
                      <th>Address</th>
                      <td>
                        {{ data.from_details[0]["unit"] }},
                        {{ data.from_details[0]["businessAddress"] }},
                        {{ data.from_details[0]["city"] }},
                        {{ data.from_details[0]["state"] }},
                        {{ data.from_details[0]["zipCode"] }}
                      </td>
                    </tr>
                  </tbody>
                </table>

                <div *ngIf="bankaccounts.length > 0">
                  <div *ngFor="let bank of bankaccounts; let i = index">
                    <span class=" ">
                      <button type="button" class="btn btn-primary" id="repullplaid" (click)="rePullBankAccounts()">
                        Update Bank Data
                      </button>
                      &nbsp;&nbsp;&nbsp;
                    </span>
                    <accordion class="p10 cardSection" *ngIf="bankaccounts.length > 0">
                      <accordion-group heading="{{ bank.bankName }}-({{
                          datePipe.transform(
                            bank.bankAccounts[i].createdAt,
                            'MMM dd, yyyy'
                          )
                        }})">
                        <accordion class="p10 cardSection">
                          <accordion-group *ngFor="let ac of bank.bankAccounts" heading="{{ ac.headername }}">
                            <table class="table table-bordered">
                              <tbody>
                                <tr>
                                  <th style="width: 50%">Account Name</th>
                                  <td>
                                    {{ ac.name }}
                                  </td>
                                </tr>
                                <tr>
                                  <th>Account Type</th>
                                  <td>{{ ac.type }}</td>
                                </tr>
                                <tr>
                                  <th>Account Subtype</th>
                                  <td>{{ ac.subtype }}</td>
                                </tr>

                                <tr>
                                  <th>Account Number</th>
                                  <td>{{ ac.acno }}</td>
                                </tr>

                                <tr>
                                  <th>Account Routing Number</th>
                                  <td>{{ ac.routing }}</td>
                                </tr>
                                <tr>
                                  <th>Account Wire Routing Number</th>
                                  <td>{{ ac.wire_routing }}</td>
                                </tr>
                                <tr>
                                  <th>Account Institution Type</th>
                                  <td>{{ ac.institution_id }}</td>
                                </tr>
                                <tr>
                                  <th>Account Current Balance</th>
                                  <td>${{ ac.current }}</td>
                                </tr>
                                <tr>
                                  <th>Account Available Balance</th>
                                  <td>${{ ac.available }}</td>
                                </tr>
                              </tbody>
                            </table>
                            <hr />
                            <h2>Transaction Details - last 365 days</h2>
                            <hr />
                            <table datatable class="table">
                              <thead class="thead-dark">
                                <tr>
                                  <th scope="col">#</th>
                                  <th scope="col">TransactionName</th>
                                  <th scope="col">Category ID</th>
                                  <th scope="col">Category</th>
                                  <th scope="col">Amount</th>
                                  <th scope="col">Date</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr *ngFor="
                                    let d of ac.transactions;
                                    let i = index
                                  ">
                                  <th scope="row">{{ i + 1 }}</th>
                                  <td>
                                    {{ d.name }}
                                  </td>
                                  <td>
                                    {{ d.category_id }}
                                  </td>
                                  <td>{{ d.category }}</td>
                                  <td>{{ d.amount }}</td>
                                  <td>{{ d.date }}</td>
                                </tr>
                              </tbody>
                            </table>
                          </accordion-group>
                        </accordion>
                      </accordion-group>
                    </accordion>
                  </div>
                </div>
              </accordion-group>
            </accordion>

            <accordion class="p10 cardSection" *ngIf="bankhistoricalbalance.length > 0">
              <accordion-group heading="Bank Historical Balance">
                <h4>User Information</h4>
                <table class="table table-bordered">
                  <tbody>
                    <tr>
                      <th style="width: 50%">Name</th>
                      <td>
                        {{ data.from_details[0].legalName }}

                      </td>
                    </tr>
                    <tr>
                      <th>Email</th>
                      <td>
                        {{ data.from_details[0]["email"] }}
                      </td>
                    </tr>
                    <tr>
                      <th>Phone</th>
                      <td>
                        {{ data.from_details[0]["phone"] }}
                      </td>
                    </tr>
                    <tr>
                      <th>Address</th>
                      <td>
                        {{ data.from_details[0]["unit"] }},
                        {{ data.from_details[0]["businessAddress"] }},
                        {{ data.from_details[0]["city"] }},
                        {{ data.from_details[0]["state"] }},
                        {{ data.from_details[0]["zipCode"] }}
                      </td>
                    </tr>
                  </tbody>
                </table>

                <div *ngIf="bankhistoricalbalance.length>0">
                  <div *ngFor="let bank of bankhistoricalbalance;let i = index;">
                    <span class="pull-right">
                      <button type="button" class="btn btn-primary" id="repullplaid"
                        (click)="rePullBankAccounts()">Update
                        Bank Data</button> &nbsp;&nbsp;&nbsp;
                    </span>
                    <accordion class="p10 cardSection" *ngIf="bankaccounts.length>0">
                      <accordion-group
                        heading="{{bank.bankName}}-({{ datePipe.transform(bank.bankAccounts[i].createdAt, 'MMM dd, yyyy') }})">
                        <accordion class="p10 cardSection">
                          <accordion-group *ngFor="let ac of bank.bankAccounts" heading="{{ac.headername}}">
                            <table class="table table-bordered">
                              <tbody>
                                <tr>
                                  <th>Account Name</th>
                                  <td>
                                    {{ac.name}}
                                  </td>
                                </tr>
                                <tr>
                                  <th>Account Type</th>
                                  <td>{{ac.type}}</td>
                                </tr>
                                <tr>
                                  <th>Account Subtype</th>
                                  <td>{{ac.subtype}}</td>
                                </tr>

                                <tr>
                                  <th>Account Number</th>
                                  <td>{{ac.acno}}</td>
                                </tr>

                                <tr>
                                  <th>Account Routing Number</th>
                                  <td>{{ac.routing}}</td>
                                </tr>
                                <tr>
                                  <th>Account Wire Routing Number</th>
                                  <td>{{ac.wire_routing}}</td>
                                </tr>
                                <tr>
                                  <th>Account Institution Type</th>
                                  <td>{{ac.institution_id}}</td>
                                </tr>
                                <tr>
                                  <th>Account Current Balance</th>
                                  <td>
                                    ${{ac.current}}
                                  </td>
                                </tr>
                                <tr>
                                  <th>Account Available Balance</th>
                                  <td>
                                    ${{ac.available}}
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                            <hr>
                            <h2>Average Balance</h2>
                            <hr>
                            <table datatable class="table">
                              <thead class="thead-dark">
                                <tr>
                                  <th scope="col">#</th>
                                  <th scope="col">Month</th>
                                  <th scope="col">Average</th>
                                </tr>
                              </thead>
                              <tbody>

                                <tr>
                                  <th>Account Routing Number</th>
                                  <td>{{ac.routing}}</td>
                                </tr>
                                <tr>
                                  <th>Account Wire Routing Number</th>
                                  <td>{{ac.wire_routing}}</td>
                                </tr>
                                <tr>
                                  <th>Account Institution Type</th>
                                  <td>{{ac.institution_id}}</td>
                                </tr>
                                <tr>
                                  <th>Account Current Balance</th>
                                  <td>
                                    ${{ac.current}}
                                  </td>
                                </tr>
                                <tr>
                                  <th>Account Available Balance</th>
                                  <td>
                                    ${{ac.available}}
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                            <hr>
                            <h2>Average Balance</h2>
                            <hr>
                            <table datatable class="table">
                              <thead class="thead-dark">
                                <tr>
                                  <th scope="col">#</th>
                                  <th scope="col">Month</th>
                                  <th scope="col">Average</th>
                                </tr>
                              </thead>
                              <tbody>

                                <tr *ngFor="let d of ac.average_balance; let c = index;">
                                  <th scope="row">{{ c + 1 }}</th>
                                  <td> {{d.month}}</td>
                                  <td> {{d.value}}</td>
                                </tr>
                              </tbody>
                            </table>
                          </accordion-group>
                        </accordion>
                      </accordion-group>
                    </accordion>
                  </div>
                </div>
              </accordion-group>
            </accordion>
          </div>
        </tab>

        <tab heading="Document Center"
          *ngIf="(data.userConsentDoc.length > 0 || data.files.length > 0) && tabs['Document Center']">
          <div class="p10px">
            <div class="frameshadow mb20px">
              <div>
                <div class="mainTitle">Financing Agreement Documents</div>
              </div>
              <div class="p10px">
                <table class="table table-bordered">
                  <tr>
                    <th style="width: 50px">#</th>
                    <th>Documents</th>
                    <!-- <th>Document Type</th> -->
                    <th>PDF</th>
                  </tr>
                  <tbody>
                    <tr *ngFor="let d of data.userConsentDoc; let i = index">
                      <td>{{ i + 1 }}</td>
                      <td>{{ d.name }}</td>
                      <!-- <td>{{ d.documentType }}</td> -->
                      <td (click)="view(showFile, d.filename)" class="cursorpointer">
                        <a>View Document</a>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <div class="mb20px">
              <div class="frameshadow">
                <div>
                  <div class="mainTitle">Upload Documents</div>
                </div>


                <div class="displayFlex AlignItemCenter spaceBetween mb50px">
                  <div class="grayButton displayFlex AlignItemCenter justifycontencenter">
                    <div class="folders"></div>
                    <div>
                      <ngx-file-drop dropZoneLabel="Drop files here" (onFileDrop)="dropped($event)"
                        (onFileOver)="fileOver($event)" (onFileLeave)="fileLeave($event)">
                        <ng-template ngx-file-drop-content-tmp let-openFileSelector="openFileSelector">
                          <span (click)="openFileSelector()">Upload new files</span>
                        </ng-template>
                      </ngx-file-drop>
                    </div>
                  </div>
                </div>

                <div class="container1 mt-5" *ngIf="listfiles.length>0">
                  <div class="part2 p-3 mt-3" *ngFor="let file of fileitems;let i = index">
                    <div class="row align-items-center">
                      <div class="col-1">
                        <div class="greenfolder"></div>
                      </div>
                      <div class="col-3">
                        {{file.name.split('.')[0]}}
                      </div>
                      <div class="col-1">
                        <span class="bg-white p-1 rounded text-sales">{{file.name.split('.')[1] | uppercase }}</span>
                      </div>
                      <div class="col-1">
                        {{(file.size / 1024).toFixed(2)}} KB
                      </div>
                      <div class="col-1">
                        {{today}}
                      </div>
                      <div class="col-2">
                        <select (change)="selectDocType(i, $event)">
                          <option value="">Select Document Type</option>
                          <option value="Government Issued ID">
                            Government Issued ID
                          </option>
                          <option value="Paystub">Paystub</option>
                          <option value="Income Document">Income Document</option>
                          <option value="Driver License">Driver License</option>
                          <option value="Bank Statement">Bank Statement</option>
                          <option value="Other">Other</option>
                        </select>
                        <input hidden (keyup)="docTypeComment(i, $event.target.value)" />
                      </div>
                      <div class="col-2 text-right">
                        <div class="delete_icon cursorpointer" (click)="deleteFileSelected(file)"></div>
                      </div>
                    </div>
                  </div>
                  <div class="p-3 mt-3 text-center">
                    <button type="button" class="btn btn-sales" (click)="upoadDocuments()">Upload</button>
                  </div>
                </div>

                <div class="p10px">
                  <table class="table table-bordered">
                    <tr>
                      <th style="width: 50px">#</th>
                      <th>Documents</th>
                      <th>Document Type</th>
                      <th>PDF,JPG,JPEG,PNG</th>
                    </tr>
                    <tbody>
                      <tr *ngFor="let d of data.files; let i = index">
                        <td>{{ i + 1 }}</td>
                        <td>{{ d.originalname }}</td>
                        <td>{{ d.documentType }}</td>
                        <td (click)="view(showFile, d.filename)"><a>View Document</a></td>
                      </tr>
                    </tbody>
                  </table>
                </div>



                <!-- <div class=" ">
                  <div
                    class="displayFlex listdetails AlignItemCenter flexStart"
                  >
                    <div class="fontWeight w200px">Document Type</div>
                    <div>
                      <select name="docutype" required="" class="form-control">
                        <option value="">Select Document Type</option>
                        <option value="Government Issued ID">
                          Government Issued ID
                        </option>
                        <option value="Paystub">Paystub</option>
                        <option value="Income Document">Income Document</option>
                        <option value="Driver License">Driver License</option>
                        <option value="Bank Statement">Bank Statement</option>
                        <option value="Other">Other</option>
                      </select>
                    </div>
                  </div>
                  <div
                    class="displayFlex listdetails AlignItemCenter flexStart"
                  >
                    <div class="fontWeight w200px">Document</div>
                    <div>
                      <input type="file" required="" />
                    </div>
                  </div>
                  <div class="p10px">
                    <button
                      type="submit"
                      class="btn btn-primary"
                      id="updocs"
                      value="Validate"
                      onclick="Validate();"
                    >
                      Submit
                    </button>
                  </div>
                </div> -->
              </div>
            </div>
          </div>
        </tab>

        <tab heading="Comments" *ngIf="data.from_details.length > 0 && tabs['Comments']">
          <div class="p10px">
            <div class="mb20px">
              <div class="frameshadow">
                <div>
                  <div class="mainTitle">Comments Section</div>
                </div>
                <form name="form" (ngSubmit)="f.form.valid && addcomments(messagebox)" #f="ngForm" novalidate>
                  <div class=" ">
                    <div class="displayFlex listdetails AlignItemCenter flexStart">
                      <div class="fontWeight w200px">Subject</div>
                      <div class="w100per">
                        <input type="text" name="subject" [(ngModel)]="cm.subject" #subject="ngModel" required
                          class="form-control" [ngClass]="{ 'is-invalid': f.submitted && subject.invalid }" />
                      </div>
                    </div>
                    <div class="displayFlex listdetails AlignItemCenter flexStart">
                      <div class="fontWeight w200px">Comments</div>
                      <div class="w100per">
                        <textarea class="form-control" name="comments" [(ngModel)]="cm.comments" #comments="ngModel"
                          required [ngClass]="{ 'is-invalid': f.submitted && subject.invalid }"></textarea>
                      </div>
                    </div>
                    <div class="p10px">
                      <button type="submit" class="btn-primary buttonSize" id="updocs" value="Validate">
                        Submit
                      </button>
                    </div>
                  </div>
                </form>
              </div>
            </div>

            <div class="frameshadow">
              <div>
                <div class="mainTitle">Comments Details</div>
              </div>
              <div class="p10px">
                <table class="table table-bordered">
                  <thead>
                    <tr class="bold">
                      <th style="width: 10px">#</th>
                      <th>Subject</th>
                      <th>Comments</th>
                      <th>Created By</th>
                      <th>Created Date</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="
                    let c of res_comments;
                    let i = index
                  ">
                      <td>{{i+1}}</td>
                      <td>{{c.subject}}</td>
                      <td>{{c.comments}}</td>
                      <td>{{c.role}}:{{c.firstName}} {{c.lastName}}</td>
                      <td>{{c.createdAt}}</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </tab>

        <tab heading="Log" *ngIf="data.from_details.length > 0 && tabs['Log']">
          <div class="p10px">
            <div class="mb20px">
              <div class="frameshadow">
                <div>
                  <div class="mainTitle">Log Activity Details</div>
                </div>

                <div class="p10px">
                  <table id="achlogactivity_table" class="table dataTable">
                    <thead>
                      <tr class="bold">
                        <th style="width: 10px">#</th>
                        <th style="white-space: nowrap;">Log Reference</th>
                        <th>Module Name</th>
                        <th>User</th>
                        <th>Created Date</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let d of screenlogs; let i= index;">
                        <td class="bold">{{i+1}}</td>
                        <td>{{d.id}}</td>
                        <td>{{d.module}}</td>
                        <td>
                          {{d.user}}
                        </td>
                        <td>{{d.createdat}}</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </tab>

        <!-- <tab heading="Comply Advantage">
          <div class="p10px" id="complyAdvantageTab">
            <table class="table table-bordered">
              <tr class="bold">

                <th>Data Point</th>
                <th>Response</th>
              </tr>
              <tbody>
                <tr>
                  <td>Adverse Media Hit?</td>

                  <td *ngIf="complyadvantageAdverseMedia;else media_false_content">Yes</td>
                  <ng-template #media_false_content>
                    <td>No</td>
                  </ng-template>
                </tr>
                <tr>
                  <td>AML Hit?</td>

                  <td *ngIf="amlTypes;else aml_false_content">Yes</td>
                  <ng-template #aml_false_content>
                    <td>No</td>
                  </ng-template>
                </tr>
                <tr>
                  <td>OFAC Hit?</td>

                  <td *ngIf="ofacSdnList;else ofac_false_content">Yes</td>
                  <ng-template #ofac_false_content>
                    <td>No</td>
                  </ng-template>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="p10px">
            <iframe style="margin-top: 10px;height:500px;" id="docusign" [src]="urlSafeComplyAdvantage" frameBorder="0"
              scrolling="auto" width="100%"></iframe>
          </div>
        </tab> -->
      </tabset>
    </div>
  </div>
</div>

<ng-template #messagebox>
  <div class="modal-body text-center">
    <button type="button" class="close pull-right" aria-label="Close" (click)="close()">
      <span aria-hidden="true">&times;</span>
    </button>
    <p class="headtext">Message</p>
    <p *ngFor="let m of message">{{ m }}</p>
  </div>
</ng-template>

<!-- Manual Bank Account Modal -->
<ng-template #manualBankAddTemp>
  <div class="modal-body">
    <button type="button" class="close pull-right" aria-label="Close" (click)="close()">
      <span aria-hidden="true">&times;</span>
    </button>
    <h5>Bank Account Information For Auto-Pay</h5>

    <form id="manualBankAddForm" name="manualBankAddForm" (ngSubmit)="f.form.valid && manualBankAdd()" #f="ngForm"
      novalidate>
      <label>Bank Name</label><br />
      <input type="text" name="bankName" [(ngModel)]="manualBankAddFields.bankName" class="form-control" /><br />
      <label>Primary Account Holder</label><br />
      <input type="text" name="holderName" [(ngModel)]="manualBankAddFields.holderName" class="form-control" /><br />
      <label>Routing Number</label><br />
      <input type="number" name="routingNumber" [(ngModel)]="manualBankAddFields.routingNumber"
        class="form-control" /><br />
      <label>Account Number</label><br />
      <input type="number" name="accountNumber" [(ngModel)]="manualBankAddFields.accountNumber"
        class="form-control" /><br />
      <label>Confirm Account Number</label><br />
      <input type="number" name="confmAccountNumber" [(ngModel)]="manualBankAddFields.confmAccountNumber"
        class="form-control" /><br />
      <button type="button" class="brw-btn closebutton mr30px w200px" (click)="close()">CANCEL</button>
      <button type="submit" class="greenbutton upperCase w200px">Save</button>
    </form>
  </div>
</ng-template>

<ng-template #showFile>
  <div class="modal-body">
    <button
      type="button"
      class="close pull-right"
      aria-label="Close"
      (click)="close()"
    >
      <span aria-hidden="true">&times;</span>
    </button>

    <div *ngIf="checkType != 'pdf'">
      <img [src] ="showFiles" width="800px" height="450px" />
    </div>

    <div *ngIf="checkType == 'pdf'">
      <iframe
        [src] ="urlSafe"
        frameBorder="0"
        scrolling="auto"
        height="450px"
        width="800px"
      ></iframe>
    </div>
</div>

</ng-template>
